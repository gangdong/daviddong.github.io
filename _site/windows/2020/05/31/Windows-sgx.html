<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/daviddong.github.io/assets/css/style.css">
<link rel="icon" href="/daviddong.github.io/assets/favicon.ico">
<title>Configure Intel SGX on Win10 | David Dong's Blog</title>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Configure Intel SGX on Win10 | David Dong’s Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Configure Intel SGX on Win10" />
<meta name="author" content="David Dong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The first step we should know if the hardware support SGX. Which include: BIOS support? CPU support? Software packages installed?" />
<meta property="og:description" content="The first step we should know if the hardware support SGX. Which include: BIOS support? CPU support? Software packages installed?" />
<link rel="canonical" href="http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html" />
<meta property="og:url" content="http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html" />
<meta property="og:site_name" content="David Dong’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-31T22:42:44+08:00" />
<script type="application/ld+json">
{"headline":"Configure Intel SGX on Win10","dateModified":"2020-05-31T22:42:44+08:00","datePublished":"2020-05-31T22:42:44+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/daviddong.github.io/BLOG"},"name":"David Dong"},"author":{"@type":"Person","name":"David Dong"},"url":"http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html","description":"The first step we should know if the hardware support SGX. Which include: BIOS support? CPU support? Software packages installed?","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->




</head>
  <body><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><main class="container">
      <section class="about">
        <a href="/daviddong.github.io/blog/index.html"><img src="/daviddong.github.io/assets/avatar.png" alt="David Dong"></a>
        <h2 id="title">
          <a href="/daviddong.github.io/blog/index.html">David Dong</a>
        </h2>
        <p class="tagline">Java/C/C#/Python</p>
        <ul class="social">
		   <a href="https://rainbow-ux.github.io/traveler-blog.github.io">
              <li>
                <i class="icon-picture-3"></i>
              </li>
           </a><a href="https://github.com/gangdong">
              <li>
                <i class="icon-github-circled-1"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/%E5%88%9A-%E8%91%A3-25208ba0/">
              <li>
                <i class="icon-linkedin-squared"></i>
              </li>
            </a>
</ul>
<nav class="navigation">
            <ul>
              
            </ul>
          </nav><p>©
          2021</p>
<div>
        <p style="font-family: Raleway, sans-serif;font-size: 100%">Dark Theme
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" id="dark-mode-toggle" onclick="toggleDarkMode()">
            <span class="slider round"></span>
          </label>
        </p>
      </div>
      <script type="text/javascript" src="/daviddong.github.io/assets/js/darkmode.js"></script><div>
        <ul class="social" style="padding-top: 3vh">
<a style="margin-right:10px;text-decoration: none;font-family: Raleway, sans-serif;" href="/daviddong.github.io/rss.xml">
              <span class="icon-rss-1">rss</span>
           </a><a style="text-decoration: none;font-family: Raleway, sans-serif;" href="https://github.com/gangdong/daviddong.github.io">
              <span class="icon-file-code">code</span>
            </a>
</ul>
      </div>
      </section>
      <section class="content">
        <!-- add menu bar here! -->


<div class="post-container">
<div class="menu">
<div style="font-size:180%;font-weight:800; margin-top: 20px">BLOG</div>
<div style="margin-top: 20px">
<a class="menu_tag_a" href="/daviddong.github.io/blog/index.html">
    <span class="icon-doc-text icon_font">Posts</span>
</a><a class="menu_tag_a" href="/daviddong.github.io/archive">
    <span class="icon-archive-1 icon_font">Archives</span>
</a><a class="menu_tag_a" href="/daviddong.github.io/category">
    <span class="icon-tags-1 icon_font">Categories</span>
</a><a class="menu_tag_b" href="/daviddong.github.io/about">
    <span class="icon-help-circled-3 icon_font">About</span>
</a>
</div>
</div>
</div>
<div class="post-container">
  <li class="posts-labelgroup" id="posts-labelgroup">
	<h1 id="posts-label">POST</h1>
  </li>  
  <a class="post-link" href="/daviddong.github.io/windows/2020/05/31/Windows-sgx.html">
    <h2 class="post-title">Configure Intel SGX on Win10</h2>
  </a>
  <div class="post-meta">
    <ul class="post-categories"><li>Windows</li></ul>
    <div class="post-date">
<i class="icon-calendar"></i>May 31, 2020</div>
  </div>
  <!-- post content here! -->
  <!-- if sidebar! -->
  
  <!-- set fix width box to put content! -->
  <div class="post-viewer-container">
	<div class="post-fix-width">
		<p>The first step we should know if the hardware support SGX.<br>
Which include:</p>
<ul>
  <li>BIOS support?</li>
  <li>CPU support?</li>
  <li>Software packages installed?</li>
</ul>

<p>Now let us go through above one by one.</p>

<h2 id="cpu-query">CPU Query</h2>
<ol>
  <li>Get the CPU model of your hardware.
By device manager -&gt; processors 
<img src="/daviddong.github.io/assets/image/others-sgx-01.PNG" alt="CPU" class="center_image">
</li>
  <li>Find the corresponding model on the <a href="https://ark.intel.com/content/www/us/en/ark/products/88185/intel-core-i5-6400-processor-6m-cache-up-to-3-30-ghz.html">Intel official website</a>, which will indicate whether it supports SGX.<br>
<img src="/daviddong.github.io/assets/image/others-sgx-02.PNG" alt="CPU" class="center_image">
Oh! My laptop’s CPU supports but need install IME software.<br>
Ok, remember this requirement and do it later. <img class="emoji" title=":smirk:" alt=":smirk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png" height="20" width="20">
</li>
</ol>

<h2 id="bios-query">BIOS Query</h2>

<p>There are 3 kind of settings on the system BIOS for SGX.</p>

<ul>
  <li><strong>Enable</strong></li>
  <li>
<strong>Software controlled</strong> - enabled through software applications. If Intel SGX is set to software controlled, Intel SGX is initially disabled. You need to make the following calls in the SDK through software application to set it to enabled state:</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sgx_enable_device</span><span class="p">()</span>
<span class="n">sgx_cap_enable_device</span><span class="p">()</span></code></pre></figure>

<p>Set softwar control mode is helpful to reduce consumption of system resources otherwise the SGX is always on and occupies a larger amount of RAMs which affects other programs and processes.</p>
<ul>
  <li><strong>Disable</strong></li>
</ul>

<h2 id="support-software-package">Support software package</h2>

<ol>
  <li>
    <p>Intel SGX software package list 
<img src="/daviddong.github.io/assets/image/others-sgx-03.PNG" alt="packages" class="center_image">
Download SGX software packages at <a href="https://software.intel.com/content/www/us/en/develop/topics/software-guard-extensions/sdk.html">here</a>.</p>
  </li>
  <li>
    <p>Install IME (Intel Management Engine)
Download IME package at <a href="https://downloadcenter.intel.com/download/29352/Intel-Management-Engine-Interface-Driver-NUC8v7PN-NUC8v5PN">here</a>.
Run SetupME.exe<br>
<img src="/daviddong.github.io/assets/image/others-sgx-09.PNG" alt="packages" class="center-image"></p>
  </li>
  <li>
    <p>Microsoft Visual Studio 2015/2017<br>
Should install Microsoft Visual Studio 2015/2017 before install SGX SDK/PSW, it is important here for the installation sequence. The SGX SDK will install plug-in on Visual Studio, if SGX SDK is installed firstly, Visual Studio will lose the plug-in.<br>
The Visual Studio install package is at <a href="https://visualstudio.microsoft.com/vs/older-downloads/">here</a>.</p>
  </li>
  <li>
    <p>Install SGX SDK<br><br>
<img src="/daviddong.github.io/assets/image/others-sgx-10.PNG" alt="packages" class="center-image">
Run <code class="language-plaintext highlighter-rouge">Intel(R)_SGX_Windows_SDK_2.7.101.2.exe</code>.</p>
  </li>
  <li>
    <p>Install PSW<br>
Run <code class="language-plaintext highlighter-rouge">Intel SGX PSW for Windows v2.7.101.2.exe</code> and unzip.<br>
You will get a folder
<img src="/daviddong.github.io/assets/image/others-sgx-05.PNG" alt="psw" class="center-image">
Check the build number of operating system by <code class="language-plaintext highlighter-rouge">winver</code> command.<br>
<img src="/daviddong.github.io/assets/image/others-sgx-08.PNG" alt="psw" class="center-image"></p>
    <ul>
      <li>If the system is <strong>windows 10 fall creators update (version 1709)</strong> or later, enter <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above</code> folder, run windows PowerShell as administrator to open command line window, and then enter <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above device</code> directory, keep going down until find <code class="language-plaintext highlighter-rouge">sgx_base.inf</code> file, input the following command:<br>
</li>
    </ul>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">pnputil</span> <span class="sr">/add-driver sgx_base.inf  /ins</span><span class="n">tall</span></code></pre></figure>

<p>Go back to <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above component</code> directory, go down until <code class="language-plaintext highlighter-rouge">find sgx_psw.inf</code> file, input the following command:<br></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">pnputil</span> <span class="sr">/add-driver sgx_psw.inf  /ins</span><span class="n">tall</span></code></pre></figure>

<ul>
  <li>If it is the previous version, choose <code class="language-plaintext highlighter-rouge">PSW_EXE_RS2_and_before</code> folder and run<br>
<code class="language-plaintext highlighter-rouge">Intel(R)_SGX_Windows_x64_PSW_2.7.101.2.exe</code> to install. <br>
Open the Visual Studio 2015 and create a new VC++ project, if the <code class="language-plaintext highlighter-rouge">Intel SGX Enclave project</code> can be found in the template window, it means the SDK and Visual Studio plug-in has been installed successfully.
<img src="/daviddong.github.io/assets/image/others-sgx-11.PNG" alt="psw" class="center-image">
</li>
</ul>


	</div>
	<!-- put sidebar! -->
	<div class="post-index-container">
		<li class="post-index">On this page</li>
		<li><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#cpu-query">CPU Query</a></li>
<li class="toc-entry toc-h2"><a href="#bios-query">BIOS Query</a></li>
<li class="toc-entry toc-h2"><a href="#support-software-package">Support software package</a></li>
</ul></li>
	</div>
  </div>
  <!-- no sidebar, use flex width box! -->
  

  <br><br><br>
  <!-- Page navigation start here! --><li class="posts-labelgroup" id="posts-labelgroup">
	<h1 id="posts-label">further reading</h1>
  </li> 
  <div class="navigation-meta" style="margin-bottom:40px">
<ul class="navigation-bar" style="margin-top:40px; min-width:40%">   
	 <a href="/daviddong.github.io/linux/2020/05/25/Linux-wsl.html" style="width:100%"><font size="1px" color="#777">Previous Post</font><br>Some notes for WSL</a>
    </ul>
<ul class="navigation-bar" style="margin-top:40px; min-width:40%">   
     <a href="/daviddong.github.io/windows/2020/06/01/Windows-sgx-helloworld.html" style="width:100%"><font size="1px" color="#777">Next Post</font><br>HelloWorld: my first SGX application</a>
    </ul>
</div>
<br>
  <!-- comment box starts here! -->
    <!-- disqus start  --><!-- Gitalk start  -->
  <!-- Link Gitalk support file  -->
  <section class="gitalk">
  <div id="gitalk_thread"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script type="text/javascript" src="/daviddong.github.io/assets/js/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
   var gitalk = new Gitalk({
   // gitalk parameters
   clientID: '5e24fc307693a6df3bc5',
   clientSecret: '28c9c17e1174c705c42e9bdc92f87cadcc4ec8b8',
   repo: 'daviddong.github.io',
   owner: 'gangdong',
   admin: ['gangdong'],
   id: md5(location.pathname),
   title: 'comments'
    });
   gitalk.render('gitalk-container');
  </script>
  </section>
  <!-- Gitalk end -->
  <br><br><br><div class="footer">© 2012-2021 David Dong. All rights reserved.</div>
  
  <br>
</div>

      </section>
    </main>
<script src="/daviddong.github.io/assets/js/simple-jekyll-search.min.js"></script>
<script src="/daviddong.github.io/assets/js/search.js"></script>
<link href="/daviddong.github.io/assets/css/vim.css" rel="stylesheet">

  </body>
</html>
