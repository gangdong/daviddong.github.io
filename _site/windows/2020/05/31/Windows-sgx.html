<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.font.im/css?family=Poppins:400,900|Raleway|Roboto:400,900|Roboto+Mono" rel="stylesheet">
<link rel="stylesheet" href="/daviddong.github.io/assets/css/style.css">
<link rel="icon" href="/daviddong.github.io/assets/favicon.ico">

	<!-- default stylesheet monokai.sublime ! -->
	
	<link href="/daviddong.github.io/assets/css/syntax/syntax.monokai.sublime.css" rel="stylesheet"/>
	

<title>Configure Intel SGX on Win10 | David Dong's Blog</title>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Configure Intel SGX on Win10 | David Dong’s Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Configure Intel SGX on Win10" />
<meta name="author" content="david.dong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This article introduced how to configure Intel SGX on Win10, show the necessary procedures and give an example." />
<meta property="og:description" content="This article introduced how to configure Intel SGX on Win10, show the necessary procedures and give an example." />
<link rel="canonical" href="http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html" />
<meta property="og:url" content="http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html" />
<meta property="og:site_name" content="David Dong’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-31T22:42:44+08:00" />
<script type="application/ld+json">
{"dateModified":"2020-05-31T22:42:44+08:00","datePublished":"2020-05-31T22:42:44+08:00","url":"http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/daviddong.github.io/BLOG"},"name":"david.dong"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/daviddong.github.io/windows/2020/05/31/Windows-sgx.html"},"author":{"@type":"Person","name":"david.dong"},"headline":"Configure Intel SGX on Win10","description":"This article introduced how to configure Intel SGX on Win10, show the necessary procedures and give an example.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->




</head>
  <body><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><main class="container">
      <section class="about">
        <a href="/daviddong.github.io/blog/index.html"><img src="/daviddong.github.io/assets/avatar.png" alt="David Dong"></a>
        <h2 id="title">
          <a href="/daviddong.github.io/blog/index.html">David Dong</a>
        </h2>
        <p class="tagline">Java/C/C#/Python</p>
		<!--add navigation --><nav class="navigation">
            <ul>
              
            </ul>
          </nav><!--put dark mode button here --><div>
		  <ul class = "social" >
			<p style = "font-family: Raleway, sans-serif;font-size: 100%">Dark Mode
			  <i class="icon-moon"></i>
			  <label class="switch">
				<input type="checkbox" id="dark-mode-toggle" onclick="toggleDarkMode()">
				<span class="slider round"></span>
			  </label>
			</p>
		  </ul>
		<script type="text/javascript" src="/daviddong.github.io/assets/js/darkmode.js"></script>
		</div><!--put rss/code link here -->
	    <div>
          <ul class="tool"><a style ="margin-right:10px; text-decoration: none" href="/daviddong.github.io/rss.xml">
              <span class="icon-rss-1 tooltip">
				<span class="tooltiptext">Rss</span>
			  </span>
           </a><a style="text-decoration: none" href="https://github.com/gangdong/daviddong.github.io">
              <span class="icon-file-code tooltip">
				<span class="tooltiptext">Code</span>
			  </span>
            </a></ul>
        </div>
	    <!--show contact me -->
	    <div class = "contact"><li>CONTACT ME</li></div>
		<!-- put social link here -->
		<div>
	      <ul class="social" >
		   <a href="https://rainbow-ux.github.io/traveler-blog.github.io">
              <li>
                <i class="icon-picture-3"></i>
              </li>
           </a><a href="https://github.com/gangdong">
              <li>
                <i class="icon-github-circled-1"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/刚-董-25208ba0/">
              <li>
                <i class="icon-linkedin-squared"></i>
              </li>
            </a><a href="mailto:dqdongg@hotmail.com">
              <li>
                <i class="icon-mail" style = "font-size: 27px"></i>
              </li>
            </a></ul>
		</div>
		<!--put timestamp here -->
		<div class ="timestamp">&copy; 2021</div>
	  <!-- about box end here -->
      </section>
      <section class="content">
        


<!-- add menu bar here! -->


<div class="post-container">
	<div  class = "menu-meta">
		<div  class = "menu-logo" style="margin-top: 20px">BLOG</div>
		<div  class = "menu" style = "margin-top: 20px">
			<a class = "icon-doc-text icon_font" href="/daviddong.github.io/blog/index.html">Posts</a><a  class = "icon-archive-1 icon_font" href="/daviddong.github.io/archive">Archives</a><a  class = "icon-tags-1 icon_font" href="/daviddong.github.io/category">Categories</a><a  class = "icon-help-circled-3 icon_font" href="/daviddong.github.io/about">About</a>
		</div>
	</div>
</div><div class="post-container">
  <li class="posts-labelgroup" id="posts-labelgroup">
	<h1 id="posts-label">POST</h1>
  </li>  
  <a class="post-link" href="/daviddong.github.io/windows/2020/05/31/Windows-sgx.html">
    <h2 class="post-title">Configure Intel SGX on Win10</h2>
  </a>
   <div class="post-meta">
    <div class="post-date icon-calendar" style = "padding-left:0px;font-size:14px">May 31, 2020</div>
  </div>
  <br>
</div>
  <!-- post content here! -->
  <!-- set fix width box to put content! -->
  <div class="post-viewer-container">
	<div class="post-fix-width">
		<p>The first step we should know if the hardware support SGX.<br />
Which include:</p>
<ul>
  <li>BIOS support?</li>
  <li>CPU support?</li>
  <li>Software packages installed?</li>
</ul>

<p>Now let us go through above one by one.</p>

<h2 id="cpu-query">CPU Query</h2>
<ol>
  <li>Get the CPU model of your hardware.
By device manager -&gt; processors 
<img src="/daviddong.github.io/assets/image/others-sgx-01.PNG" alt="CPU" class="center_image" /></li>
  <li>Find the corresponding model on the <a href="https://ark.intel.com/content/www/us/en/ark/products/88185/intel-core-i5-6400-processor-6m-cache-up-to-3-30-ghz.html">Intel official website</a>, which will indicate whether it supports SGX.<br />
<img src="/daviddong.github.io/assets/image/others-sgx-02.PNG" alt="CPU" class="center_image" />
Oh! My laptop’s CPU supports but need install IME software.<br />
Ok, remember this requirement and do it later. 😎</li>
</ol>

<h2 id="bios-query">BIOS Query</h2>

<p>There are 3 kind of settings on the system BIOS for SGX.</p>

<ul>
  <li><strong>Enable</strong></li>
  <li><strong>Software controlled</strong> - enabled through software applications. If Intel SGX is set to software controlled, Intel SGX is initially disabled. You need to make the following calls in the SDK through software application to set it to enabled state:</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sgx_enable_device</span><span class="p">()</span>
<span class="n">sgx_cap_enable_device</span><span class="p">()</span></code></pre></figure>

<p>Set softwar control mode is helpful to reduce consumption of system resources otherwise the SGX is always on and occupies a larger amount of RAMs which affects other programs and processes.</p>
<ul>
  <li><strong>Disable</strong></li>
</ul>

<h2 id="support-software-package">Support software package</h2>

<ol>
  <li>
    <p>Intel SGX software package list 
<img src="/daviddong.github.io/assets/image/others-sgx-03.PNG" alt="packages" class="center_image" />
Download SGX software packages at <a href="https://software.intel.com/content/www/us/en/develop/topics/software-guard-extensions/sdk.html">here</a>.</p>
  </li>
  <li>
    <p>Install IME (Intel Management Engine)
Download IME package at <a href="https://downloadcenter.intel.com/download/29352/Intel-Management-Engine-Interface-Driver-NUC8v7PN-NUC8v5PN">here</a>.
Run SetupME.exe<br />
<img src="/daviddong.github.io/assets/image/others-sgx-09.PNG" alt="packages" class="center-image" /></p>
  </li>
  <li>
    <p>Microsoft Visual Studio 2015/2017<br />
Should install Microsoft Visual Studio 2015/2017 before install SGX SDK/PSW, it is important here for the installation sequence. The SGX SDK will install plug-in on Visual Studio, if SGX SDK is installed firstly, Visual Studio will lose the plug-in.<br />
The Visual Studio install package is at <a href="https://visualstudio.microsoft.com/vs/older-downloads/">here</a>.</p>
  </li>
  <li>
    <p>Install SGX SDK<br /><br />
<img src="/daviddong.github.io/assets/image/others-sgx-10.PNG" alt="packages" class="center-image" />
Run <code class="language-plaintext highlighter-rouge">Intel(R)_SGX_Windows_SDK_2.7.101.2.exe</code>.</p>
  </li>
  <li>
    <p>Install PSW<br />
Run <code class="language-plaintext highlighter-rouge">Intel SGX PSW for Windows v2.7.101.2.exe</code> and unzip.<br />
You will get a folder
<img src="/daviddong.github.io/assets/image/others-sgx-05.PNG" alt="psw" class="center-image" />
Check the build number of operating system by <code class="language-plaintext highlighter-rouge">winver</code> command.<br />
<img src="/daviddong.github.io/assets/image/others-sgx-08.PNG" alt="psw" class="center-image" /></p>
    <ul>
      <li>If the system is <strong>windows 10 fall creators update (version 1709)</strong> or later, enter <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above</code> folder, run windows PowerShell as administrator to open command line window, and then enter <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above device</code> directory, keep going down until find <code class="language-plaintext highlighter-rouge">sgx_base.inf</code> file, input the following command:<br /></li>
    </ul>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">pnputil</span> <span class="sr">/add-driver sgx_base.inf  /ins</span><span class="n">tall</span></code></pre></figure>

<p>Go back to <code class="language-plaintext highlighter-rouge">PSW_INF_RS3_and_above component</code> directory, go down until <code class="language-plaintext highlighter-rouge">find sgx_psw.inf</code> file, input the following command:<br /></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">pnputil</span> <span class="sr">/add-driver sgx_psw.inf  /ins</span><span class="n">tall</span></code></pre></figure>

<ul>
  <li>If it is the previous version, choose <code class="language-plaintext highlighter-rouge">PSW_EXE_RS2_and_before</code> folder and run<br />
<code class="language-plaintext highlighter-rouge">Intel(R)_SGX_Windows_x64_PSW_2.7.101.2.exe</code> to install. <br />
Open the Visual Studio 2015 and create a new VC++ project, if the <code class="language-plaintext highlighter-rouge">Intel SGX Enclave project</code> can be found in the template window, it means the SDK and Visual Studio plug-in has been installed successfully.
<img src="/daviddong.github.io/assets/image/others-sgx-11.PNG" alt="psw" class="center-image" /></li>
</ul>


	</div>
	<!-- put sidebar! -->
	
	<div class = "sidebar-container">
	    
	    <div class = "sidebar-about-box">
		    
				<li class = "sidebar-title">About This Article</li>
			
			
				
					<li class = "sidebar-about-content sidebar-font-big">This article introduced how to configure Intel SGX on Win10, show the necessary procedures and give an example.</li>
				
				
					<li class = "icon-link-1 sidebar-about-content sidebar-font-big" style = "margin-top:30px">Author: <a href="https://github.com/gangdong">david.dong</a></li>
				
					<li class = "icon-clock-5 sidebar-about-content sidebar-font-big">6 mins to read</li>
					<li class = "icon-book-1 sidebar-about-content sidebar-font-big">2205 words</li>
				
					<li class = "icon-th-list-1 sidebar-about-content sidebar-font-big">Key Words: SGX/Win10</li>
				
				
				    <li class = "icon-hashtag sidebar-about-content sidebar-font-medium">Tags: 
					
					<a href="/daviddong.github.io/category#Windows">Windows&nbsp;</a>
					
					</li>
				
			
		</div>
		
		
	    <div class="sidebar-toc-box">
			
			<li class = "sidebar-title">Table of Content</li>
			<li class = "sidebar-font-big sidebar-toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#cpu-query">CPU Query</a></li>
<li class="toc-entry toc-h2"><a href="#bios-query">BIOS Query</a></li>
<li class="toc-entry toc-h2"><a href="#support-software-package">Support software package</a></li>
</ul></li>
			
		</div>
		
	</div>
	 
  </div>
  <!-- no sidebar, use flex width box! -->
  <br><br><br>
  <div class="post-container">
  
  <div class = "share-box-meta">
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
	
	<div class="addthis_inline_share_toolbox share-box"><span style ="padding: 2px">Share:</span></div>
	
	<!-- Put post veiw statistic here! -->
	<div class = "post-view">
		<li class = "icon-eye">&nbsp;<span id="busuanzi_value_page_pv"></span></li>
	</div>
  </div>
  
  <!-- Related posts start here! -->
		
		<h1 id="posts-label">You may also like</h1>
		
	  <div class = "related-posts-box">
		<ul>
			
			<li><a href="/daviddong.github.io/security/windows/2020/07/23/Security-signature-02.html">利用Microsoft WDK工具生成数字签名</a></li>
			
			<li><a href="/daviddong.github.io/windows/2020/07/09/Windows-inf2cat.html">Inf2Cat 工具</a></li>
			
			<li><a href="/daviddong.github.io/c++/fingerprint/windows/2020/06/13/Cpp-wbdi-03.html">Fingerprint driver development in Windows(3)</a></li>
			
			<li><a href="/daviddong.github.io/c++/fingerprint/windows/2020/06/10/Cpp-wbdi-02.html">Fingerprint driver development in Windows(2)</a></li>
			
			<li><a href="/daviddong.github.io/c++/fingerprint/windows/2020/06/07/Cpp-wbdi.html">Fingerprint driver development in Windows(1)</a></li>
			
		</ul>
	  </div>
	  
	
  <!-- Page navigation start here! -->
   <h1 id="posts-label">further reading</h1>
  
  <div class = "separator"></div>
  <div class="navigation-meta" style = "margin-bottom:40px"><ul class="navigation-bar" style = "margin-top:40px; min-width:40%">
	 
	 <a href="/daviddong.github.io/linux/2020/05/25/Linux-wsl.html"; style="width:100%"><span class = "navigation-bar-label">Previous Post</span><br>Some notes for WSL</a>
	 
    </ul><ul class="navigation-bar" style = "margin-top:40px; min-width:40%"> 
	 
     <a href="/daviddong.github.io/windows/2020/06/01/Windows-sgx-helloworld.html"; style="width:100%"><span class = "navigation-bar-label">Next Post</span><br>HelloWorld: my first SGX application</a>
	 
    </ul></div><br>
  <!-- comment box starts here! -->
    <!-- disqus start  --><!-- Gitalk start  -->
  <!-- Link Gitalk support file  -->
  <section class="gitalk">
  <div id="gitalk_thread"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script type="text/javascript" src="/daviddong.github.io/assets/js/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
   var gitalk = new Gitalk({
   // gitalk parameters
   clientID: '5e24fc307693a6df3bc5',
   clientSecret: '28c9c17e1174c705c42e9bdc92f87cadcc4ec8b8',
   repo: 'daviddong.github.io',
   owner: 'gangdong',
   admin: ['gangdong'],
   id: md5(location.pathname),
   title: 'comments'
    });
   gitalk.render('gitalk-container');
  </script>
  </section>
  <!-- Gitalk end -->
  <br/><br/><br/><div class = "footer">© 2012-2021 David Dong. All rights reserved.</div>
  
  <br>
</div>

      </section>
    </main>
<script src="/daviddong.github.io/assets/js/simple-jekyll-search.min.js"></script>
<script src="/daviddong.github.io/assets/js/search.js"></script>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-604f502a8198c9c9"></script>

</body>
</html>
