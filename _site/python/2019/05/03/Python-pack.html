<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.font.im/css?family=Poppins:400,900|Raleway|Roboto:400,900|Roboto+Mono" rel="stylesheet">
<link rel="stylesheet" href="/daviddong.github.io/assets/css/style.css">
<link rel="icon" href="/daviddong.github.io/assets/favicon.ico">

	<!-- default stylesheet monokai.sublime ! -->
	
	<link href="/daviddong.github.io/assets/css/syntax/syntax.monokai.sublime.css" rel="stylesheet"/>
	

<title>Python struct.pack() | David Dong's Blog</title>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Python struct.pack() | David Dong’s Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Python struct.pack()" />
<meta name="author" content="david.dong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This article introduced Python struct.pack() method." />
<meta property="og:description" content="This article introduced Python struct.pack() method." />
<link rel="canonical" href="http://localhost:4000/daviddong.github.io/python/2019/05/03/Python-pack.html" />
<meta property="og:url" content="http://localhost:4000/daviddong.github.io/python/2019/05/03/Python-pack.html" />
<meta property="og:site_name" content="David Dong’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-03T14:07:05+08:00" />
<script type="application/ld+json">
{"dateModified":"2019-05-03T14:07:05+08:00","datePublished":"2019-05-03T14:07:05+08:00","url":"http://localhost:4000/daviddong.github.io/python/2019/05/03/Python-pack.html","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/daviddong.github.io/BLOG"},"name":"david.dong"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/daviddong.github.io/python/2019/05/03/Python-pack.html"},"author":{"@type":"Person","name":"david.dong"},"headline":"Python struct.pack()","description":"This article introduced Python struct.pack() method.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->




</head>
  <body><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><main class="container">
      <section class="about">
        <a href="/daviddong.github.io/blog/index.html"><img src="/daviddong.github.io/assets/avatar.png" alt="David Dong"></a>
        <h2 id="title">
          <a href="/daviddong.github.io/blog/index.html">David Dong</a>
        </h2>
        <p class="tagline">Java/C/C#/Python</p>
		<!--add navigation --><nav class="navigation">
            <ul>
              
            </ul>
          </nav><!--put dark mode button here --><div>
		  <ul class = "social" >
			<p style = "font-family: Raleway, sans-serif;font-size: 100%">Dark Mode
			  <i class="icon-moon"></i>
			  <label class="switch">
				<input type="checkbox" id="dark-mode-toggle" onclick="toggleDarkMode()">
				<span class="slider round"></span>
			  </label>
			</p>
		  </ul>
		<script type="text/javascript" src="/daviddong.github.io/assets/js/darkmode.js"></script>
		</div><!--put rss/code link here -->
	    <div>
          <ul class="tool"><a style ="margin-right:10px; text-decoration: none" href="/daviddong.github.io/rss.xml">
              <span class="icon-rss-1 tooltip">
				<span class="tooltiptext">Rss</span>
			  </span>
           </a><a style="text-decoration: none" href="https://github.com/gangdong/daviddong.github.io">
              <span class="icon-file-code tooltip">
				<span class="tooltiptext">Code</span>
			  </span>
            </a></ul>
        </div>
	    <!--show contact me -->
	    <div class = "contact"><li>CONTACT ME</li></div>
		<!-- put social link here -->
		<div>
	      <ul class="social" >
		   <a href="https://rainbow-ux.github.io/traveler-blog.github.io">
              <li>
                <i class="icon-picture-3"></i>
              </li>
           </a><a href="https://github.com/gangdong">
              <li>
                <i class="icon-github-circled-1"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/刚-董-25208ba0/">
              <li>
                <i class="icon-linkedin-squared"></i>
              </li>
            </a><a href="mailto:dqdongg@hotmail.com">
              <li>
                <i class="icon-mail" style = "font-size: 27px"></i>
              </li>
            </a></ul>
		</div>
		<!--put timestamp here -->
		<div class ="timestamp">&copy; 2021</div>
	  <!-- about box end here -->
      </section>
      <section class="content">
        


<!-- add menu bar here! -->


<div class="post-container">
	<div  class = "menu-meta">
		<div  class = "menu-logo" style="margin-top: 20px">BLOG</div>
		<div  class = "menu" style = "margin-top: 20px">
			<a class = "icon-doc-text icon_font" href="/daviddong.github.io/blog/index.html">Posts</a><a  class = "icon-archive-1 icon_font" href="/daviddong.github.io/archive">Archives</a><a  class = "icon-tags-1 icon_font" href="/daviddong.github.io/category">Categories</a><a  class = "icon-help-circled-3 icon_font" href="/daviddong.github.io/about">About</a>
		</div>
	</div>
</div><div class="post-container">
  <li class="posts-labelgroup" id="posts-labelgroup">
	<h1 id="posts-label">POST</h1>
  </li>  
  <a class="post-link" href="/daviddong.github.io/python/2019/05/03/Python-pack.html">
    <h2 class="post-title">Python struct.pack()</h2>
  </a>
   <div class="post-meta">
    <div class="post-date icon-calendar" style = "padding-left:0px;font-size:14px">May 3, 2019</div>
  </div>
  <br>
</div>
  <!-- post content here! -->
  <!-- set fix width box to put content! -->
  <div class="post-viewer-container">
	<div class="post-fix-width">
		<p>Python uses <code class="language-plaintext highlighter-rouge">struct.pack()</code> to pack python data type into binary data (byte stream), which means convert a value to a string based on the format.</p>

<p>Because there is no byte type in Python, here the string is actually equivalent to byte stream, or byte array.</p>

<h3 id="structpack">struct.pack()</h3>

<p>The function prototype:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">struck</span><span class="p">.</span><span class="n">pack</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">,...)</span></code></pre></figure>

<p>format: define the convert format.
data1,data2,…: the data needs to be packed.</p>

<p>The format includes</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>Format</strong></th>
      <th style="text-align: center"><strong>C Type</strong></th>
      <th style="text-align: center"><strong>Python Type</strong></th>
      <th style="text-align: center"><strong>Standard Size</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">x</td>
      <td style="text-align: center">pad byte</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">c</td>
      <td style="text-align: center">char</td>
      <td style="text-align: center">string of length 1</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: center">b</td>
      <td style="text-align: center">signed char</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: center">B</td>
      <td style="text-align: center">unsigned char</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: center">?</td>
      <td style="text-align: center">_bool</td>
      <td style="text-align: center">bool</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: center">h</td>
      <td style="text-align: center">short</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">2</td>
    </tr>
    <tr>
      <td style="text-align: center">H</td>
      <td style="text-align: center">unsigned short</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">2</td>
    </tr>
    <tr>
      <td style="text-align: center">i</td>
      <td style="text-align: center">int</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">I</td>
      <td style="text-align: center">unsigned int</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">l</td>
      <td style="text-align: center">long</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">L</td>
      <td style="text-align: center">unsigned long</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">q</td>
      <td style="text-align: center">long long</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">8</td>
    </tr>
    <tr>
      <td style="text-align: center">Q</td>
      <td style="text-align: center">unsigned long long</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center">8</td>
    </tr>
    <tr>
      <td style="text-align: center">f</td>
      <td style="text-align: center">float</td>
      <td style="text-align: center">float</td>
      <td style="text-align: center">4</td>
    </tr>
    <tr>
      <td style="text-align: center">d</td>
      <td style="text-align: center">double</td>
      <td style="text-align: center">float</td>
      <td style="text-align: center">8</td>
    </tr>
    <tr>
      <td style="text-align: center">s</td>
      <td style="text-align: center">char[]</td>
      <td style="text-align: center">string</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">p</td>
      <td style="text-align: center">char[]string</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">P</td>
      <td style="text-align: center">void *</td>
      <td style="text-align: center">integer</td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<p>In order to exchange data with the structure in C, it is also necessary to consider that some C or C + + compilers use byte alignment, usually a 32-bit system with 4 bytes as the unit. Therefore, struct can be converted according to the byte order of the local machine. The alignment can be changed by the first character in the format. The definition is as follows:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>Format</strong></th>
      <th style="text-align: center"><strong>Byte Order</strong></th>
      <th style="text-align: center"><strong>Size</strong></th>
      <th style="text-align: center"><strong>alignment</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">@</td>
      <td style="text-align: center">native byte</td>
      <td style="text-align: center">native</td>
      <td style="text-align: center">native</td>
    </tr>
    <tr>
      <td style="text-align: center">=</td>
      <td style="text-align: center">native</td>
      <td style="text-align: center">standard</td>
      <td style="text-align: center">none</td>
    </tr>
    <tr>
      <td style="text-align: center">&lt;</td>
      <td style="text-align: center">little-endian char</td>
      <td style="text-align: center">standard</td>
      <td style="text-align: center">none</td>
    </tr>
    <tr>
      <td style="text-align: center">&gt;</td>
      <td style="text-align: center">big-endian char</td>
      <td style="text-align: center">standard</td>
      <td style="text-align: center">none</td>
    </tr>
    <tr>
      <td style="text-align: center">!</td>
      <td style="text-align: center">network (= big-endian)</td>
      <td style="text-align: center">standard</td>
      <td style="text-align: center">none</td>
    </tr>
  </tbody>
</table>

<p>Use it in the first place of format.</p>

<p>for example.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">struct</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">12</span>

<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">pack</span><span class="p">(</span><span class="s">"ii"</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)))</span>
<span class="mi">8</span>
<span class="k">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">pack</span><span class="p">(</span><span class="s">"ii"</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
<span class="s">b'</span><span class="se">\x0b\x00\x00\x00\x0c\x00\x00\x00</span><span class="s">'</span></code></pre></figure>

<h3 id="structunpack">struct.unpack()</h3>

<p><code class="language-plaintext highlighter-rouge">struct.unpack()</code> unpacks the byte stream into Python data type.<br />
The function prototype:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">struct</span><span class="p">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span></code></pre></figure>

<p>This function return a tuple.</p>

<p>For example.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">packdata</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="n">pack</span><span class="p">(</span><span class="s">"ii"</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="n">c</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">"1i1i"</span><span class="p">,</span><span class="n">packdata</span><span class="p">)</span>
<span class="k">print</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">))</span>
<span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span></code></pre></figure>

<h3 id="structcalcsize">struct.calcsize()</h3>

<p><code class="language-plaintext highlighter-rouge">Struct.calcsize()</code> is used to calculate the length of the result corresponding to the format string.</p>

<p>For example.<br /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">"c"</span><span class="p">))</span>
<span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">"H"</span><span class="p">))</span>
<span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">"L"</span><span class="p">))</span>
<span class="mi">4</span>
<span class="k">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">"Q"</span><span class="p">))</span>
<span class="mi">8</span></code></pre></figure>

	</div>
	<!-- put sidebar! -->
	
	<div class = "sidebar-container">
	    
	    <div class = "sidebar-about-box">
		    
				<li class = "sidebar-title">About This Article</li>
			
			
				
					<li class = "sidebar-about-content sidebar-font-big">This article introduced Python struct.pack() method.</li>
				
				
					<li class = "icon-link-1 sidebar-about-content sidebar-font-big" style = "margin-top:30px">Author: <a href="https://github.com/gangdong">david.dong</a></li>
				
					<li class = "icon-clock-5 sidebar-about-content sidebar-font-big">5 mins to read</li>
					<li class = "icon-book-1 sidebar-about-content sidebar-font-big">1779 words</li>
				
					<li class = "icon-th-list-1 sidebar-about-content sidebar-font-big">Key Words: Python/</li>
				
				
				    <li class = "icon-hashtag sidebar-about-content sidebar-font-medium">Tags: 
					
					<a href="/daviddong.github.io/category#Python">Python&nbsp;</a>
					
					</li>
				
			
		</div>
		
		
	    <div class="sidebar-toc-box">
			
			<li class = "sidebar-title">Table of Content</li>
			<li class = "sidebar-font-big sidebar-toc-content"><ul id="toc" class="section-nav">
<li class="toc-entry toc-h3"><a href="#structpack">struct.pack()</a></li>
<li class="toc-entry toc-h3"><a href="#structunpack">struct.unpack()</a></li>
<li class="toc-entry toc-h3"><a href="#structcalcsize">struct.calcsize()</a></li>
</ul></li>
			
		</div>
		
	</div>
	 
  </div>
  <!-- no sidebar, use flex width box! -->
  <br><br><br>
  <div class="post-container">
  
  <div class = "share-box-meta">
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
	
	<div class="addthis_inline_share_toolbox share-box"><span style ="padding: 2px">Share:</span></div>
	
	<!-- Put post veiw statistic here! -->
	<div class = "post-view">
		<li class = "icon-eye">&nbsp;<span id="busuanzi_value_page_pv"></span></li>
	</div>
  </div>
  
  <!-- Related posts start here! -->
		
		<h1 id="posts-label">You may also like</h1>
		
	  <div class = "related-posts-box">
		<ul>
			
			<li><a href="/daviddong.github.io/python/2019/05/11/Python-re.html">Python re module</a></li>
			
			<li><a href="/daviddong.github.io/python/2019/04/01/Python-coding-spec.html">Python 开发编码规范（转）</a></li>
			
			<li><a href="/daviddong.github.io/python/2019/03/07/Python-pillow.html">Python Pillow library usage</a></li>
			
			<li><a href="/daviddong.github.io/python/2019/01/23/Python-installation-ubuntu.html">Install python3.6 on ubuntu16.04</a></li>
			
		</ul>
	  </div>
	  
	
  <!-- Page navigation start here! -->
   <h1 id="posts-label">further reading</h1>
  
  <div class = "separator"></div>
  <div class="navigation-meta" style = "margin-bottom:40px"><ul class="navigation-bar" style = "margin-top:40px; min-width:40%">
	 
	 <a href="/daviddong.github.io/python/2019/04/01/Python-coding-spec.html"; style="width:100%"><span class = "navigation-bar-label">Previous Post</span><br>Python 开发编码规范（转）</a>
	 
    </ul><ul class="navigation-bar" style = "margin-top:40px; min-width:40%"> 
	 
     <a href="/daviddong.github.io/python/2019/05/11/Python-re.html"; style="width:100%"><span class = "navigation-bar-label">Next Post</span><br>Python re module</a>
	 
    </ul></div><br>
  <!-- comment box starts here! -->
    <!-- disqus start  --><!-- Gitalk start  -->
  <!-- Link Gitalk support file  -->
  <section class="gitalk">
  <div id="gitalk_thread"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script type="text/javascript" src="/daviddong.github.io/assets/js/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
   var gitalk = new Gitalk({
   // gitalk parameters
   clientID: '5e24fc307693a6df3bc5',
   clientSecret: '28c9c17e1174c705c42e9bdc92f87cadcc4ec8b8',
   repo: 'daviddong.github.io',
   owner: 'gangdong',
   admin: ['gangdong'],
   id: md5(location.pathname),
   title: 'comments'
    });
   gitalk.render('gitalk-container');
  </script>
  </section>
  <!-- Gitalk end -->
  <br/><br/><br/><div class = "footer">© 2012-2021 David Dong. All rights reserved.</div>
  
  <br>
</div>

      </section>
    </main>
<script src="/daviddong.github.io/assets/js/simple-jekyll-search.min.js"></script>
<script src="/daviddong.github.io/assets/js/search.js"></script>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-604f502a8198c9c9"></script>

</body>
</html>
